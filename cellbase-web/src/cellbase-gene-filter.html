<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="cellbase-biotype-options.html">

<link rel="import" href="cellbase-shared-styles.html">

<dom-module id="cellbase-gene-filter">
    <template>
        <style is="custom-style" include="cellbase-shared-styles">
            .biotype-scroll{
                max-height: 300px;
                overflow-y:scroll;
            }
        </style>

        <!--<div class="filter">-->
        <!--<div class="tabs">-->
        <!--<paper-tabs class="tabview" selected={{selected}}>-->
        <!--<paper-tab id="filerTab">Filter</paper-tab>-->
        <!--<paper-tab id="result">Results</paper-tab>-->
        <!--</paper-tabs>-->
        <!--</div>-->

        <!--<div class="content">-->
        <!--<iron-pages id="selectedTab" selected="{{selected}}">-->
        <!--<div class="filter-content">-->
        <!--<paper-button id="clear" on-click="clearAllFields" raised>clear</paper-button>-->
        <!--<paper-button id="run" on-click="changePage" raised>run</paper-button>-->
        <!--<br><br>-->
        <!--<div class="constraints">-->
        <!--<paper-textarea type="text" value={{region}} label="Region"></paper-textarea>-->
        <!--</div>-->
        <!--<div class="constraints">-->
        <!--<paper-textarea type="text" value={{ids}} label="ID"></paper-textarea>-->
        <!--</div>-->

        <!--<cellbase-biotype-options cellbaseclienta={{cellBaseClient}} biotypes={{biotype}}></cellbase-biotype-options>-->

        <div>

            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#filter1" role="tab" data-toggle="tab">Filter</a></li>
                <li role="presentation"><a href="#result1" role="tab" data-toggle="tab">Result</a></li>
            </ul>

            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="filter1">
                    <button type="button" class="btn btn-default" on-click="clearAllFields" >Clear</button>
                    <button type="button" class="btn btn-default" on-click="changePage">Run</button>
                    <br>

                    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title">
                                    <a role="button" data-toggle="collapse" data-parent="#accordion" href="#geneId"
                                       aria-expanded="true" aria-controls="geneId">
                                        Gene IDs
                                    </a>
                                </h4>
                            </div>
                            <div id="geneId" class="panel-collapse collapse in" role="tabpanel"
                                 aria-labelledby="headingOne">
                                <div class="panel-body">
                                    <textarea class="form-control" rows="3">{{ids}}</textarea>
                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingTwo">
                                <h4 class="panel-title">
                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                                       href="#region" aria-expanded="false" aria-controls="region">
                                        Region
                                    </a>
                                </h4>
                            </div>
                            <div id="region" class="panel-collapse collapse" role="tabpanel"
                                 aria-labelledby="headingTwo">
                                <div class="panel-body">
                                    <textarea class="form-control" rows="3">{{region}}</textarea>
                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingThree">
                                <h4 class="panel-title">
                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                                       href="#biotype" aria-expanded="false" aria-controls="biotype">
                                        Select biotypes
                                    </a>
                                </h4>
                            </div>
                            <div id="biotype" class="panel-collapse collapse" role="tabpanel"
                                 aria-labelledby="headingThree">
                                <div class="panel-body biotype-scroll">
                                    <cellbase-biotype-options cellbaseclienta={{cellBaseClient}} biotypes={{biotype}}></cellbase-biotype-options>
                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingFour">
                                <h4 class="panel-title">
                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                                       href="#drug" aria-expanded="false" aria-controls="drug">
                                        Drugs
                                    </a>
                                </h4>
                            </div>
                            <div id="drug" class="panel-collapse collapse" role="tabpanel"
                                 aria-labelledby="headingFour">
                                <div class="panel-body">
                                    <textarea class="form-control" rows="3"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingFive">
                                <h4 class="panel-title">
                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                                       href="#phenotype" aria-expanded="false" aria-controls="phenotype">
                                        Phenotype
                                    </a>
                                </h4>
                            </div>
                            <div id="phenotype" class="panel-collapse collapse" role="tabpanel"
                                 aria-labelledby="headingFive">
                                <div class="panel-body">
                                    <textarea class="form-control" rows="3"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingSix">
                                <h4 class="panel-title">
                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                                       href="#expression" aria-expanded="false" aria-controls="expression">
                                        Expression
                                    </a>
                                </h4>
                            </div>
                            <div id="expression" class="panel-collapse collapse" role="tabpanel"
                                 aria-labelledby="headingSix">
                                <div class="panel-body">
                                    <textarea class="form-control" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div role="tabpanel" class="tab-pane" id="result1">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Region</th>
                            <th>ID</th>
                            <th>biotype</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <th scope="row">1</th>
                            <td>{{region}}</td>
                            <td>{{ids}}</td>
                            <td>{{biotype}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </template>
    <script>
        Polymer({
            is: 'cellbase-gene-filter',
            properties: {
                selected: {
                    type: String,
                    value: ""
                },
                region: {
                    type: String
                },
                ids: {
                    type: String
                },
                biotype: {
                    type: Array,
                    notify: true
                },
                cellBaseClient: {
                    type: Object,
                    notify: true
                }
            },
            clearAllFields: function (e) {
                this.region = "";
                this.ids = "";
            },
            changePage: function (e) {
//                var pages = document.querySelector('iron-pages#selectedTab');
//                pages.selectNext();
                $('.nav-tabs a[href="#result1"]').tab('show')

                console.log("In Run:")
                console.log(this.biotype)
            },
            ready: function() {
//                $('#myTabs a').click(function (e) {
//                    console.log("taaaaaaaaaabs")
//                    e.preventDefault()
//                    $(this).tab('show')
//                });
                this.cellBaseClient = CELLBASE_CLIENT;
                console.log(this.cellBaseClient)
            }
        });
    </script>
</dom-module>
